{
  "options": {
    "steps": 30,
    "trials": 5,
    "clearEvery": 5,
    "addNodesAt": [
      20,
      40,
      60
    ],
    "mode": "ui",
    "clientBalance": 1000000,
    "minCommitted": 60,
    "maxFailed": 15,
    "anomalyTop1Share": 0.95,
    "anomalyHhi": 0.93,
    "anomalyBudgetSkipRatio": 0.55,
    "anomalyBudgetSkipStreak": 20,
    "anomalyMinActiveRouteNodes": 2,
    "maxSampleFailures": 12,
    "llmCmd": "node -e \"let s=\\\"\\\";process.stdin.on(\\\"data\\\",d=>s+=d).on(\\\"end\\\",()=>{const i=JSON.parse(s);const ok=i.report.totals.failedTrials===0&&i.report.totals.anomalyTrials===0;process.stdout.write(JSON.stringify({verdict:ok?\\\"pass\\\":\\\"fail\\\",reason:ok?\\\"deterministic clean\\\":\\\"deterministic blockers found\\\",confidence:0.6}));});\"",
    "llmTimeoutMs": 90000,
    "llmRequired": false,
    "whitepaperPath": "../whitepaper.md",
    "whitepaperMaxChars": 12000,
    "whitepaperRuleOnly": true,
    "allowFailures": true,
    "jsonOut": "reports/autodiag-smoke.json"
  },
  "autoTickPolicy": {
    "clearEvery": 5,
    "routeNearBestRatio": 0.12,
    "routeTemperature": 0.08,
    "adaptiveDeltaFloor": 16,
    "maxPaymentRatio": 0.25,
    "budgetRefillThreshold": 2500,
    "budgetRefillAmount": 1800
  },
  "totals": {
    "failedTrials": 5,
    "anomalyTrials": 0,
    "totalTrials": 5
  },
  "averages": {
    "committed": 28.6,
    "failed": 1.4,
    "routes": 30,
    "budgetSkips": 0,
    "budgetSkipRatio": 0,
    "maxBudgetSkipStreak": 0,
    "top1Share": 0.8,
    "hhi": 0.6737777777777778,
    "activeRouteNodes": 2.4,
    "clearingOutflow": 26662.49697581992,
    "commitGross": 451435.1773171929,
    "clearingToCommitRatio": 0.05929183038904273,
    "clientBalance": 548564.8226828072
  },
  "issueCounts": {
    "committed_low": 5,
    "failed_high": 0,
    "no_route": 0,
    "inflight_not_drained": 0,
    "all_isolated": 0,
    "invalid_state": 0,
    "node_absorption": 0,
    "budget_starvation": 0,
    "budget_stall": 0,
    "low_route_diversity": 0
  },
  "routeShares": {
    "DOMINANT": 120
  },
  "rootCauses": [
    "未发现显著结构性异常，当前配置在给定阈值内稳定。"
  ],
  "samples": [
    {
      "trial": 1,
      "committed": 28,
      "failed": 2,
      "inflight": 0,
      "routes": 30,
      "budgetSkips": 0,
      "budgetSkipRatio": 0,
      "maxBudgetSkipStreak": 0,
      "isolated": 0,
      "top1Share": 0.8,
      "hhi": 0.668888888888889,
      "activeRouteNodes": 3,
      "clearingOutflow": 25696.955651284024,
      "commitGross": 418264.77812501404,
      "clearingToCommitRatio": 0.061437053740163436,
      "clientBalance": 581735.2218749858,
      "firstBudgetSkipStep": null,
      "firstDominantStep": null,
      "firstFailedExceedStep": null,
      "issues": [
        {
          "code": "committed_low",
          "message": "committed too low: 28 < 60"
        }
      ]
    },
    {
      "trial": 2,
      "committed": 29,
      "failed": 1,
      "inflight": 0,
      "routes": 30,
      "budgetSkips": 0,
      "budgetSkipRatio": 0,
      "maxBudgetSkipStreak": 0,
      "isolated": 0,
      "top1Share": 0.8333333333333334,
      "hhi": 0.7222222222222223,
      "activeRouteNodes": 2,
      "clearingOutflow": 30974.951016289793,
      "commitGross": 474433.92178559606,
      "clearingToCommitRatio": 0.0652882300230797,
      "clientBalance": 525566.0782144042,
      "firstBudgetSkipStep": null,
      "firstDominantStep": null,
      "firstFailedExceedStep": null,
      "issues": [
        {
          "code": "committed_low",
          "message": "committed too low: 29 < 60"
        }
      ]
    },
    {
      "trial": 3,
      "committed": 27,
      "failed": 3,
      "inflight": 0,
      "routes": 30,
      "budgetSkips": 0,
      "budgetSkipRatio": 0,
      "maxBudgetSkipStreak": 0,
      "isolated": 0,
      "top1Share": 0.7333333333333333,
      "hhi": 0.5755555555555555,
      "activeRouteNodes": 3,
      "clearingOutflow": 21466.243980939606,
      "commitGross": 483157.16019291605,
      "clearingToCommitRatio": 0.04442911282194083,
      "clientBalance": 516842.83980708406,
      "firstBudgetSkipStep": null,
      "firstDominantStep": null,
      "firstFailedExceedStep": null,
      "issues": [
        {
          "code": "committed_low",
          "message": "committed too low: 27 < 60"
        }
      ]
    },
    {
      "trial": 4,
      "committed": 29,
      "failed": 1,
      "inflight": 0,
      "routes": 30,
      "budgetSkips": 0,
      "budgetSkipRatio": 0,
      "maxBudgetSkipStreak": 0,
      "isolated": 0,
      "top1Share": 0.8333333333333334,
      "hhi": 0.7222222222222223,
      "activeRouteNodes": 2,
      "clearingOutflow": 27374.90361462525,
      "commitGross": 451302.6539993645,
      "clearingToCommitRatio": 0.06065752853885011,
      "clientBalance": 548697.3460006353,
      "firstBudgetSkipStep": null,
      "firstDominantStep": 8,
      "firstFailedExceedStep": null,
      "issues": [
        {
          "code": "committed_low",
          "message": "committed too low: 29 < 60"
        }
      ]
    },
    {
      "trial": 5,
      "committed": 30,
      "failed": 0,
      "inflight": 0,
      "routes": 30,
      "budgetSkips": 0,
      "budgetSkipRatio": 0,
      "maxBudgetSkipStreak": 0,
      "isolated": 0,
      "top1Share": 0.8,
      "hhi": 0.6800000000000002,
      "activeRouteNodes": 2,
      "clearingOutflow": 27799.430615960933,
      "commitGross": 430017.37248307356,
      "clearingToCommitRatio": 0.0646472268211796,
      "clientBalance": 569982.6275169265,
      "firstBudgetSkipStep": null,
      "firstDominantStep": 8,
      "firstFailedExceedStep": null,
      "issues": [
        {
          "code": "committed_low",
          "message": "committed too low: 30 < 60"
        }
      ]
    }
  ],
  "llm": {
    "status": "ok",
    "required": false,
    "timeoutMs": 90000,
    "cmd": "node -e \"let s=\\\"\\\";process.stdin.on(\\\"data\\\",d=>s+=d).on(\\\"end\\\",()=>{const i=JSON.parse(s);const ok=i.report.totals.failedTrials===0&&i.report.totals.anomalyTrials===0;process.stdout.write(JSON.stringify({verdict:ok?\\\"pass\\\":\\\"fail\\\",reason:ok?\\\"deterministic clean\\\":\\\"deterministic blockers found\\\",confidence:0.6}));});\"",
    "whitepaper": {
      "path": "/Users/envvar/work/repos/bk/whitepaper.md",
      "included": true,
      "mode": "rule_only",
      "sourceChars": 14464,
      "excerptChars": 3528,
      "truncated": false
    },
    "verdict": {
      "verdict": "fail",
      "reason": "deterministic blockers found",
      "confidence": 0.6
    }
  }
}
