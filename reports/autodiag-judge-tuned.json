{
  "options": {
    "steps": 120,
    "trials": 20,
    "clearEvery": 8,
    "addNodesAt": [
      20,
      40,
      60
    ],
    "mode": "ui",
    "clientBalance": 1000000,
    "minCommitted": 60,
    "maxFailed": 15,
    "routeNearBestRatio": 0.28,
    "routeTemperature": 0.12,
    "adaptiveDeltaFloor": 8,
    "maxPaymentRatio": 0.08,
    "budgetRefillThreshold": 9000,
    "budgetRefillAmount": 4500,
    "anomalyTop1Share": 0.95,
    "anomalyHhi": 0.93,
    "anomalyBudgetSkipRatio": 0.55,
    "anomalyBudgetSkipStreak": 20,
    "anomalyMinActiveRouteNodes": 2,
    "maxSampleFailures": 12,
    "judgeCmd": "bun run src/scripts/codex-judge.ts --model gpt-5.3-codex --timeout-ms 180000",
    "judgeTimeoutMs": 90000,
    "judgeRequired": true,
    "judgeAuthoritative": true,
    "whitepaperPath": "../whitepaper.md",
    "whitepaperMaxChars": 12000,
    "whitepaperRuleOnly": true,
    "allowFailures": false,
    "jsonOut": "reports/autodiag-judge-tuned.json"
  },
  "autoTickPolicy": {
    "clearEvery": 8,
    "routeNearBestRatio": 0.28,
    "routeTemperature": 0.12,
    "adaptiveDeltaFloor": 8,
    "maxPaymentRatio": 0.08,
    "budgetRefillThreshold": 9000,
    "budgetRefillAmount": 4500
  },
  "totals": {
    "failedTrials": 0,
    "anomalyTrials": 0,
    "totalTrials": 20
  },
  "averages": {
    "committed": 117,
    "failed": 3,
    "routes": 120,
    "budgetSkips": 0,
    "budgetSkipRatio": 0,
    "maxBudgetSkipStreak": 0,
    "top1Share": 0.6241666666666665,
    "hhi": 0.5361944444444445,
    "activeRouteNodes": 2.6,
    "clearingOutflow": 188031.9154536274,
    "commitGross": 979540.58585627,
    "clearingToCommitRatio": 0.1919538756156821,
    "clientBalance": 20459.41414373004
  },
  "issueCounts": {
    "committed_low": 0,
    "failed_high": 0,
    "no_route": 0,
    "inflight_not_drained": 0,
    "all_isolated": 0,
    "invalid_state": 0,
    "node_absorption": 0,
    "budget_starvation": 0,
    "budget_stall": 0,
    "low_route_diversity": 0
  },
  "routeShares": {
    "DOMINANT": 1498
  },
  "rootCauses": [
    "未发现显著结构性异常，当前配置在给定阈值内稳定。"
  ],
  "samples": [],
  "judge": {
    "status": "ok",
    "required": true,
    "timeoutMs": 90000,
    "cmd": "bun run src/scripts/codex-judge.ts --model gpt-5.3-codex --timeout-ms 180000",
    "whitepaper": {
      "path": "/Users/envvar/work/repos/bk/whitepaper.md",
      "included": true,
      "mode": "rule_only",
      "sourceChars": 14464,
      "excerptChars": 3528,
      "truncated": false
    },
    "verdict": {
      "verdict": "fail",
      "reason": "路由长期集中，异常发现不足",
      "confidence": 0.9,
      "findings": [
        "20轮平均 top1Share=0.624，显示单节点吸收约62%流量，存在持续集中迹象。",
        "平均 HHI=0.536，集中度偏高，不符合白皮书“全局负载均衡/反垄断”意图。",
        "平均 activeRouteNodes=2.6，活跃路由节点数偏少，路由多样性不足。",
        "anomalyTrials=0 且 node_absorption/low_route_diversity 计数为0，与上述集中度信号不一致，说明异常检测灵敏度不足。",
        "budgetSkipRatio=0、maxBudgetSkipStreak=0，未见预算饥饿/skip-loop 持续问题。"
      ],
      "suggestedActions": [
        "将 top1Share、HHI、activeRouteNodes 纳入滚动窗口联合告警，并要求“连续多窗口”触发 node_absorption。",
        "在路由成本函数加入集中度惩罚或探索项，抬高头部节点边际价格以促使流量外溢。",
        "补充每轮节点分流样本与时间序列，验证“持续性”而非仅看均值。",
        "复核 clearingToCommitRatio 的目标区间并按 commit 流量分层监控，避免后续出现清算负担结构性恶化。"
      ]
    }
  },
  "llm": {
    "status": "ok",
    "required": true,
    "timeoutMs": 90000,
    "cmd": "bun run src/scripts/codex-judge.ts --model gpt-5.3-codex --timeout-ms 180000",
    "whitepaper": {
      "path": "/Users/envvar/work/repos/bk/whitepaper.md",
      "included": true,
      "mode": "rule_only",
      "sourceChars": 14464,
      "excerptChars": 3528,
      "truncated": false
    },
    "verdict": {
      "verdict": "fail",
      "reason": "路由长期集中，异常发现不足",
      "confidence": 0.9,
      "findings": [
        "20轮平均 top1Share=0.624，显示单节点吸收约62%流量，存在持续集中迹象。",
        "平均 HHI=0.536，集中度偏高，不符合白皮书“全局负载均衡/反垄断”意图。",
        "平均 activeRouteNodes=2.6，活跃路由节点数偏少，路由多样性不足。",
        "anomalyTrials=0 且 node_absorption/low_route_diversity 计数为0，与上述集中度信号不一致，说明异常检测灵敏度不足。",
        "budgetSkipRatio=0、maxBudgetSkipStreak=0，未见预算饥饿/skip-loop 持续问题。"
      ],
      "suggestedActions": [
        "将 top1Share、HHI、activeRouteNodes 纳入滚动窗口联合告警，并要求“连续多窗口”触发 node_absorption。",
        "在路由成本函数加入集中度惩罚或探索项，抬高头部节点边际价格以促使流量外溢。",
        "补充每轮节点分流样本与时间序列，验证“持续性”而非仅看均值。",
        "复核 clearingToCommitRatio 的目标区间并按 commit 流量分层监控，避免后续出现清算负担结构性恶化。"
      ]
    }
  }
}
