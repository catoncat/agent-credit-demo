# 算法设计说明

## 摘要

本文给出自治信用网络的算法层定义。目标是在质量波动、负载变化与预算约束并存的条件下，实现可解释、可收敛、可审计的任务分配机制。算法核心由四部分构成：有效价格建模、约束下路由决策、质量判定反馈、周期清算再平衡。

## 1. 目标函数与约束

系统在每个决策时刻，面向候选节点集合最小化有效成本。

\[
\arg\min_i\; P_i^{eff}
\]

其中，\(P_i^{eff}\) 同时编码边际成本、风险摩擦与质量折扣。决策必须满足三类约束：

- 容量约束：节点可用容量不低于任务需求。
- 预算约束：单次支付不超过账户可承受比例与周期节奏上限。
- 治理约束：满足策略域、风控域与可执行性门槛。

该目标使“低成本”与“高成功率”在同一标尺下比较，避免单维度最优导致的系统退化。

## 2. 状态变量与控制变量

算法使用以下状态表示网络运行面：

- 容量状态：节点短期可用容量与其恢复动态。
- 信用状态：账户余额、顺逆差累计与周期偏差。
- 质量状态：近期通过率、超时率、异常率与稳定度。
- 摩擦状态：风险溢价、拥塞惩罚与衰减系数。

控制变量由策略层给出，包括探索强度、近优窗口、预算上限比例与清算阈值。算法层只消费这些控制变量，不绑定具体实现细节。

## 3. 路由决策机制

路由采用“最优优先 + 受控探索”的混合机制。

第一步，计算候选节点有效价格并排序；第二步，在近优集合内进行软采样，保留必要探索；第三步，应用反集中保护，抑制单节点吸附。

该机制的作用是：

- 短期保持较高执行效率。
- 中期降低路径锁死概率。
- 长期提升网络抗脆弱性与节点参与度。

## 4. 输出判定与信用更新

任务返回后进入统一判定器。判定器将结构合规、质量得分、超时与工具异常信号合成为通过/失败结论。

- 通过：执行提交，写入有效收益与状态更新。
- 失败：触发失败路径，执行补偿并更新风险摩擦。

质量反馈采用滑动更新，使近期行为对后续路由产生即时影响，同时避免单次异常造成永久偏置。

## 5. 周期清算与宏观再平衡

系统以周期窗口进行偏差清算，目标不是惩罚节点，而是抑制长期失衡。

清算逻辑遵循对称性：

- 持续顺差节点承担调节税，抑制过度集中。
- 持续逆差节点承担修正费，约束低效扩张。

阈值采用动态机制：偏差越高，阈值越高，以防止清算风暴；偏差回落后，阈值恢复收敛约束。

## 6. 收敛性与稳定性讨论

系统收敛依赖三层闭环共同作用：

- 微观闭环：有效价格驱动即时路由分流。
- 中观闭环：质量反馈抬升低质路径成本。
- 宏观闭环：周期清算压制长期结构偏差。

在合理参数域内，网络表现为“负载可迁移、失败可隔离、信用可回归”的稳定动力学。算法因此具备工程可用性与治理可解释性。
